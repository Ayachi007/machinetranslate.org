
{% assign meta = "404,Coming soon,Style,Roadmap,Contributing,About Machine Translate" | split:"," %}

<center>
  <p>
  {% if meta contains page.title %}
    Have a question?  Want machine translation news?
  {% elsif page.layout == 'coming_soon' %}
    Want to learn about {{ page.title }}?
  {% else %}
    Want to learn more about {{ page.title }}?
  {% endif %}
  </p>

  {% if meta contains page.title %}
  <p>
    <a href="https://reddit.com/r/machinetranslation" class="no-arrow" target="_blank">
        <button id="airtable-button">
          Explore the community
        </button>
    </a>
  </p>
  <p>
    <a href="https://www.reddit.com/r/machinetranslation/submit?selftext=truesubmit&title=Question%20about%20...%20%3F" class="no-arrow" target="_blank">
      <button id="airtable-button">
        Ask your own question
      </button>
    </a>
  </p>
  {% else %}
  <p>
    <a href="https://www.reddit.com/r/machinetranslation/search?q={{ page.title | url_encode }}&restrict_sr=on" class="no-arrow" target="_blank">
      <button id="airtable-button">
        Search for community posts about {{ page.title }}
      </button>
    </a>
  </p>
  <p>
    <a href="https://www.reddit.com/r/machinetranslation/submit?selftext=truesubmit&title={{ page.title | url_encode }}%20...%20%3F" class="no-arrow" target="_blank">
      <button id="airtable-button">
        Ask your own question about {{ page.title }}
      </button>
    </a>
  </p>
  {% endif %}
</center>

<small>

<center>
  {% if page.title == '404' %}
    <p>
      <a
        target="_blank"
        href="https://github.com/machinetranslate/machinetranslate.org/new/master/{{ page.path }}">
        <strong>Create this article →</strong>
      </a>
    </p>
  {% elsif page.layout == 'coming_soon' %}
    <p>
      <a
        target="_blank"
        href="https://github.com/machinetranslate/machinetranslate.org/blob/master/{{ page.path }}">
        <strong>Write this article →</strong>
      </a>
    </p>
  {% else %}
    <p id="edited" style="display: none;">
      Edited on <span id="edited-date"></span> by <a id="edited-username"></a>.
    <p>
    </p>
      <a
        target="_blank"
        href="https://github.com/machinetranslate/machinetranslate.org/blob/master/{{ page.path }}">
        <strong>Edit this article →</strong>
      </a>
    </p>
  {% endif %}
</center>

<center>
    <p>
      Machine Translate is created and edited by contributors like you!
    </p>
    <p>
      <a href="/contributing">Learn more about contributing →</a>
    </p>
  {% if page.layout != "coming_soon" %}
    <p>
      Licensed under <a target="_blank" href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA-4.0</a>.
    </p>
    <p>
      <a
        target="_blank"
        href="https://machinetranslate.org/about/#attribution">
        Cite this article →
      </a>
    </p>
  {% endif %}
</center>

</small>

<hr/>
<center>
  <div class="social-links">
    {% include github.html %}
    {% include twitter.html %}
    {% include linkedin.html %}
    {% include facebook.html %}
  </div>
</center>

<script>

  function toLocaleString(date) {
    var d = new Date(date);
    return d.toLocaleString('en-UK', { day: 'numeric', month: 'long', year: 'numeric' });
  }

  var url = 'https://api.github.com/repos/{{ site.github.owner_name }}/{{ site.github.repository_name }}/commits?path={{ page.path }}';

  fetch(url)
  .then((response) => response.json())
  .then((commits) => {
    var date = commits[0].commit.committer.date.slice(0,10);
    var username = commits[0].author.login;
    document.getElementById('edited-date').textContent = toLocaleString(date);
    document.getElementById('edited-username').textContent = username;
    document.getElementById('edited-username').href = "https://github.com/" + username;
    document.getElementById('edited').style.display = 'inline'
  });
</script>
